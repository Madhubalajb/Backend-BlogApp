(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),u=n(1),l=n.n(u),s=n(3),i=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:e.login},r.a.createElement("input",{type:"text",placeholder:"Username",onChange:e.u_name,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:e.u_password,required:!0}),r.a.createElement("button",{type:"submit"},"Login")))},p=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:e.addUser},r.a.createElement("input",{type:"text",placeholder:"Name",onChange:e.name}),r.a.createElement("input",{type:"text",placeholder:"Username",onChange:e.u_name}),r.a.createElement("input",{type:"password",placeholder:"Set Password",onChange:e.u_password}),r.a.createElement("button",{type:"submit"},"Sign Up")))},m=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Create new"),r.a.createElement("form",{onSubmit:e.blog},r.a.createElement("input",{type:"text",placeholder:"Title",onChange:e.title,required:!0}),r.a.createElement("input",{type:"text",placeholder:"Author",onChange:e.author,required:!0}),r.a.createElement("input",{type:"text",placeholder:"url",onChange:e.url,required:!0}),r.a.createElement("button",{type:"submit"},"Create")))},d=r.a.forwardRef((function(e,t){var n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],u=c[1],l={display:o?"none":""},i={display:o?"":"none"},p=function(){u(!o)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:p}})),r.a.createElement("div",null,r.a.createElement("div",{style:l},r.a.createElement("button",{onClick:p},e.buttonLabel)),r.a.createElement("div",{style:i},e.children,r.a.createElement("button",{onClick:p},"cancel")))})),f=n(4),b=n.n(f),g=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(b.a.post("api/login",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},h=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(b.a.post("api/users",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},v=null,w=function(e){v="bearer ".concat(e)},E=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(b.a.get("api/blogs"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},y=function(e){var t,n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:v}},a.next=3,l.a.awrap(b.a.post("api/blogs",e,t));case 3:return n=a.sent,a.abrupt("return",n.data);case 5:case"end":return a.stop()}}))},O=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),f=u[0],b=u[1],v=Object(a.useState)(""),O=Object(s.a)(v,2),j=O[0],x=O[1],S=Object(a.useState)(""),C=Object(s.a)(S,2),k=C[0],U=C[1],_=Object(a.useState)(""),B=Object(s.a)(_,2),L=B[0],q=B[1],A=Object(a.useState)(""),I=Object(s.a)(A,2),J=I[0],R=I[1],V=Object(a.useState)(""),D=Object(s.a)(V,2),N=D[0],P=D[1],T=Object(a.useState)([]),W=Object(s.a)(T,2),z=W[0],H=W[1],$=Object(a.useState)(""),F=Object(s.a)($,2),G=F[0],K=F[1],M=Object(a.useState)(!1),Q=Object(s.a)(M,2),X=(Q[0],Q[1],r.a.createRef()),Y=r.a.createRef(),Z=r.a.createRef();Object(a.useEffect)((function(){E().then((function(e){return H(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);U(t),w(t.token)}}),[]);var ee=function(e){K(e),setTimeout((function(){K("")}),5e3)},te=function(e){return b(e.target.value)},ne=function(e){return x(e.target.value)};return""===k?r.a.createElement(d,{buttonLabel:"Login",ref:X},r.a.createElement(i,{login:function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.a.awrap(g({username:f,password:j}));case 4:t=n.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(t)),w(t.token),U(t),b(""),x(""),X.current.toggleVisibility(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,13]])},u_name:te,u_password:ne})):r.a.createElement("div",null,G,r.a.createElement("p",null,k.name," logged in"),r.a.createElement("button",{onClick:function(){U(""),window.localStorage.removeItem("loggedBlogAppUser"),w("")}},"logout"),r.a.createElement(d,{buttonLabel:"Create new",ref:Z},r.a.createElement(m,{blog:function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.a.awrap(y({title:L,author:J,url:N}));case 4:t=n.sent,H(z.concat(t)),ee("Blog created :)"),q(""),R(""),P(""),Z.current.toggleVisibility(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.log(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,13]])},title:function(e){return q(e.target.value)},author:function(e){return R(e.target.value)},url:function(e){return P(e.target.value)}})),r.a.createElement(d,{buttonLabel:"SignUp",ref:Y},r.a.createElement(p,{addUser:function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,t.next=4,l.a.awrap(h({name:n,username:f,password:j}));case 4:t.sent,ee("User created :)"),c(""),b(""),x(""),Y.current.toggleVisibility(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),null,null,[[1,12]])},name:function(e){return c(e.target.value)},u_name:te,u_password:ne})),r.a.createElement("h1",null,"Blogs"),function(e){return e.map((function(e){return r.a.createElement("p",null,e.title)}))}(z))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.12d61476.chunk.js.map