(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),u=n(1),l=n.n(u),s=n(4),i=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:e.login},r.a.createElement("input",{type:"text",placeholder:"Username",onChange:e.u_name,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:e.u_password,required:!0}),r.a.createElement("button",{type:"submit"},"Login")))},p=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:e.addUser},r.a.createElement("input",{type:"text",placeholder:"Name",onChange:e.name}),r.a.createElement("input",{type:"text",placeholder:"Username",onChange:e.u_name}),r.a.createElement("input",{type:"password",placeholder:"Set Password",onChange:e.u_password}),r.a.createElement("button",{type:"submit"},"Sign Up")))},m=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Create new"),r.a.createElement("form",{onSubmit:e.blog},r.a.createElement("input",{type:"text",placeholder:"Title",onChange:e.title,required:!0}),r.a.createElement("input",{type:"text",placeholder:"Author",onChange:e.author,required:!0}),r.a.createElement("input",{type:"text",placeholder:"url",onChange:e.url,required:!0}),r.a.createElement("button",{type:"submit"},"Create")))},d=n(3),g=n.n(d),f=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(g.a.post("api/login",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},h=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(g.a.post("api/users",e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},b=null,v=function(e){b="bearer ".concat(e)},w=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(g.a.get("api/blogs"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},E=function(e){var t,n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:b}},a.next=3,l.a.awrap(g.a.post("api/blogs",e,t));case 3:return n=a.sent,a.abrupt("return",n.data);case 5:case"end":return a.stop()}}))},x=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),d=u[0],g=u[1],b=Object(a.useState)(""),x=Object(s.a)(b,2),y=x[0],O=x[1],S=Object(a.useState)(""),j=Object(s.a)(S,2),k=j[0],C=j[1],U=Object(a.useState)(""),_=Object(s.a)(U,2),B=_[0],A=_[1],q=Object(a.useState)(""),I=Object(s.a)(q,2),J=I[0],N=I[1],D=Object(a.useState)(""),L=Object(s.a)(D,2),P=L[0],W=L[1],z=Object(a.useState)([]),T=Object(s.a)(z,2),$=T[0],F=T[1];Object(a.useEffect)((function(){w().then((function(e){return F(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);C(t),v(t.token)}}),[]);var G=function(e){return g(e.target.value)},H=function(e){return O(e.target.value)};return""===k?r.a.createElement(i,{login:function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.a.awrap(f({username:d,password:y}));case 4:t=n.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(t)),v(t.token),C(t),g(""),O(""),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),console.log(n.t0);case 15:case"end":return n.stop()}}),null,null,[[1,12]])},u_name:G,u_password:H}):r.a.createElement("div",null,r.a.createElement("p",null,k.name," logged in"),r.a.createElement("button",{onClick:function(){C(""),window.localStorage.removeItem("loggedBlogAppUser"),v("")}},"logout"),r.a.createElement(m,{blog:function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,l.a.awrap(E({title:B,author:J,url:P}));case 4:t=n.sent,F($.concat(t)),A(""),N(""),W(""),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0);case 14:case"end":return n.stop()}}),null,null,[[1,11]])},title:function(e){return A(e.target.value)},author:function(e){return N(e.target.value)},url:function(e){return W(e.target.value)}}),r.a.createElement(p,{addUser:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),a.prev=1,a.next=4,l.a.awrap(h({name:n,username:d,password:y}));case 4:t=a.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(t)),v(k.token),o(""),g(""),O(""),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.log(a.t0);case 15:case"end":return a.stop()}}),null,null,[[1,12]])},name:function(e){return o(e.target.value)},u_name:G,u_password:H}),r.a.createElement("h1",null,"Blogs"),function(e){return e.map((function(e){return r.a.createElement("p",null,e.title)}))}($))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.b1287d26.chunk.js.map